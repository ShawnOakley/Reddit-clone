<% action = (user.persisted? ? user_url(user) : users_url) %>
<% method = (user.persisted? ? 'put' : 'post') %>
<% message = (user.persisted? ? 'Update user' : 'Create user')%>

<form action='<%= action %>' method='post'>
  <input
    name='_method'
    type='hidden'
    value='<%= method %>'>

    <input
    name='authenticity_token'
    type='hidden'
    value='<%= form_authenticity_token %>'>

    <label>Username
      <input
        name='user[username]'
        type='text'>
      </label>

    <label>Password
      <input
        name='user[password]'
        type='text'>
      </label>

      <input type='submit' value='<%= message %>'>